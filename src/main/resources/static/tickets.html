<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Покупка билета — Музей</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/main.css" rel="stylesheet">
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="shortcut icon" href="/favicon.ico">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom">
  <div class="container">
    <a class="navbar-brand fw-semibold" href="/">Музей</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#ticketsNavbar">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="ticketsNavbar">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link" href="/">Главная</a></li>
        <li class="nav-item"><a class="nav-link" href="/events.html">Афиша</a></li>
        <li class="nav-item"><a class="nav-link" href="/exhibitions.html">Экспозиции</a></li>
        <li class="nav-item"><a class="nav-link" href="/visit.html">Посетителям</a></li>
        <li class="nav-item"><a class="nav-link" href="/about.html">О музее</a></li>
        <li class="nav-item"><a class="nav-link" href="/author.html">Об авторе</a></li>
        <li class="nav-item"><a class="nav-link" href="/profile">Личный кабинет</a></li>
        <li class="nav-item"><a class="nav-link" href="/login">Вход</a></li>
      </ul>
    </div>
  </div>
</nav>

<main class="section-padding">
  <div class="container">
    <div class="row g-4">
      <div class="col-lg-7">
        <h1 class="section-title mb-2">Покупка билета</h1>
        <p class="section-subtitle mb-4">
          Шаги: выберите мероприятие, укажите данные и подтвердите заявку.
        </p>

        <form id="ticket-flow-form" class="ticket-flow">
          <section class="ticket-step mb-4">
            <h2 class="h6 text-uppercase text-muted mb-2">Шаг 1. Выбор мероприятия</h2>
            <div class="mb-3">
              <label class="form-label">Мероприятие</label>
              <select id="ticket-flow-event" class="form-select" required></select>
            </div>
          </section>

          <section class="ticket-step mb-4">
            <h2 class="h6 text-uppercase text-muted mb-2">Шаг 2. Количество билетов</h2>
            <div class="row g-3 align-items-end">
              <div class="col-6 col-md-4">
                <label class="form-label">Билетов, шт.</label>
                <input type="number" id="ticket-flow-qty" class="form-control" min="1" value="1" required>
              </div>
              <div class="col-6 col-md-4">
                <label class="form-label">Ориентировочная цена</label>
                <input type="text" id="ticket-flow-total" class="form-control" readonly placeholder="Рассчитывается по цене события">
              </div>
            </div>
          </section>

          <section class="ticket-step mb-4">
            <h2 class="h6 text-uppercase text-muted mb-2">Шаг 3. Данные посетителя</h2>
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">Имя и фамилия</label>
                <input id="ticket-flow-name" class="form-control" required>
              </div>
              <div class="col-md-6">
                <label class="form-label">E‑mail</label>
                <input id="ticket-flow-email" type="email" class="form-control" required>
              </div>
              <div class="col-12">
                <label class="form-label">Комментарий (необязательно)</label>
                <textarea id="ticket-flow-note" class="form-control" rows="2" placeholder="Например, количество гостей, особенности посещения и т.д."></textarea>
              </div>
            </div>
          </section>

          <section class="ticket-step mb-4">
            <h2 class="h6 text-uppercase text-muted mb-2">Шаг 4. Подтверждение</h2>
            <p class="small mb-2">
              После нажатия на кнопку ваша заявка будет обработана, и на указанный e‑mail придет подтверждение.
            </p>
            <button type="submit" class="btn btn-dark">Подтвердить покупку</button>
            <div id="ticket-flow-message" class="small mt-2"></div>
          </section>
        </form>
      </div>
      <div class="col-lg-5">
        <div class="card border-0 shadow-sm">
          <div class="card-body">
            <h2 class="h6 text-uppercase text-muted mb-2">Сводка заказа</h2>
            <p class="mb-1"><strong id="ticket-summary-title">Мероприятие не выбрано</strong></p>
            <p class="small mb-1 text-muted" id="ticket-summary-date"></p>
            <p class="small mb-3 text-muted" id="ticket-summary-hall"></p>
            <p class="small mb-1">Количество билетов: <span id="ticket-summary-qty">1</span></p>
            <p class="small mb-0">Итого: <span id="ticket-summary-total">—</span></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>

<footer class="museum-footer border-top">
  <div class="container py-4">
    <div class="row g-4">
      <div class="col-md-4">
        <h6 class="footer-title">МУЗЕЙ</h6>
        <p class="small mb-2">Информационно‑справочная система музея.</p>
      </div>
      <div class="col-md-4">
        <h6 class="footer-title">КОНТАКТЫ</h6>
        <p class="small mb-1">Москва, 4-й Вешняковский проезд, д. 4, к. 3</p>
        <p class="small mb-1">Телефон: +7 (937) 749 13-60</p>
        <p class="small mb-1">Email: info@kononovmuseum.ru</p>
        <p class="small mb-0">Вт–Вс: 11:00–21:00, Пн — выходной</p>
      </div>
      <div class="col-md-4">
        <h6 class="footer-title">ПОДПИСКА И ССЫЛКИ</h6>
        <form class="d-flex gap-2 mb-2">
          <input type="email" class="form-control form-control-sm" placeholder="Ваш e‑mail">
          <button class="btn btn-dark btn-sm" type="button">Подписаться</button>
        </form>
        <div class="d-flex flex-wrap gap-2 small">
          <span class="text-muted">Соцсети:</span>
          <a href="#" class="link-secondary text-decoration-none">VK</a>
          <a href="#" class="link-secondary text-decoration-none">Telegram</a>
          <a href="#" class="link-secondary text-decoration-none">YouTube</a>
        </div>
        <div class="small mt-2">
          <a href="/swagger-ui.html" class="link-secondary text-decoration-none">API (Swagger)</a> ·
          <a href="/admin" class="link-secondary text-decoration-none">Админ‑панель</a>
        </div>
      </div>
    </div>
    <div class="d-flex justify-content-between align-items-center pt-3 mt-3 border-top small text-muted">
      <span>© Музей 2025</span>
      <span>Учебный проект</span>
    </div>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/main.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    MuseumFront.initTicketsPage({
      eventSelectId: 'ticket-flow-event',
      qtyInputId: 'ticket-flow-qty',
      totalInputId: 'ticket-flow-total',
      nameInputId: 'ticket-flow-name',
      emailInputId: 'ticket-flow-email',
      formId: 'ticket-flow-form',
      messageId: 'ticket-flow-message',
      summaryTitleId: 'ticket-summary-title',
      summaryDateId: 'ticket-summary-date',
      summaryHallId: 'ticket-summary-hall',
      summaryQtyId: 'ticket-summary-qty',
      summaryTotalId: 'ticket-summary-total'
    });
  });
</script>
</body>
</html>
